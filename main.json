{"main":"ZGVmIGluZm9fbGljZW5jZShsaWNlbmNlSUQpOgogICAgdHJ5OgogICAgICAgIHVybCA9IGYiaHR0cHM6Ly9hcGkuaHlwZXIuY28vdjYvbGljZW5zZXMve2xpY2VuY2VJRH0iCiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgImFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyIHBrXzFFUnFiZlRuUm9wblZmVFVXRXZxbVcxWUtKOERickl6RTZBUVk5MVZzRWxsMW9UdFFrZElWMkRxMDJlT3AyMmMifQogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkKICAgIGV4Y2VwdDoKICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuCgppZiAoaW5mb19saWNlbmNlKGxpY2VuY2UpKToKICAgIGluZm8gPSBpbmZvX2xpY2VuY2UobGljZW5jZSkKICAgIGlmIChpbmZvWydwbGFuJ11bJ2FjdGl2ZSddKToKICAgICAgICBpZiAoaW5mb1sncGxhbiddWydhY3RpdmUnXSA9PSBUcnVlKToKICAgICAgICAgICAgQVBJX1JldHVybl9JTlRFR1JBVElPTl9EaXNjb3JkSUQgPSBpbmZvWydpbnRlZ3JhdGlvbnMnXVsnZGlzY29yZCddWydpZCddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fSU5URUdSQVRJT05fRGlzY29yZFVzZXJuYW1lID0gaW5mb1snaW50ZWdyYXRpb25zJ11bJ2Rpc2NvcmQnXVsndXNlcm5hbWUnXQogICAgICAgICAgICBBUElfUmV0dXJuX0lOVEVHUkFUSU9OX0Rpc2NvcmREaXNjcmltaW5hdG9yID0gaW5mb1snaW50ZWdyYXRpb25zJ11bJ2Rpc2NvcmQnXVsnZGlzY3JpbWluYXRvciddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fSU5URUdSQVRJT05fRGlzY29yZEF2YXRhciA9IGluZm9bJ2ludGVncmF0aW9ucyddWydkaXNjb3JkJ11bJ2F2YXRhciddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9TdGF0dXQgPSBpbmZvWydwbGFuJ11bJ2FjdGl2ZSddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9uYW1lID0gaW5mb1sncGxhbiddWyduYW1lJ10KICAgICAgICAgICAgQVBJX1JldHVybl9QTEFOX0Rlc2NyaXB0aW9uID0gaW5mb1sncGxhbiddWydkZXNjcmlwdGlvbiddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9JbWFnZSA9IGluZm9bJ3BsYW4nXVsnaW1hZ2UnXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fQW1vdW50SW50ZXJ2YWwgPSBpbmZvWydwbGFuJ11bJ2Ftb3VudCddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9SZWN1cnJpbmdJbnRlcnZhbCA9IGluZm9bJ3BsYW4nXVsncmVjdXJyaW5nJ11bJ2ludGVydmFsJ10KICAgICAgICAgICAgQVBJX1JldHVybl9QTEFOX1JlY3VycmluZ0NvdW50ID0gaW5mb1sncGxhbiddWydyZWN1cnJpbmcnXVsnaW50ZXJ2YWxfY291bnQnXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fVHlwZSA9IGluZm9bJ3BsYW4nXVsndHlwZSddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9EZXZpc2UgPSBpbmZvWydwbGFuJ11bJ2N1cnJlbmN5J10KICAgICAgICAgICAgaWYoQVBJX1JldHVybl9QTEFOX0RldmlzZT09ImV1ciIpOgogICAgICAgICAgICAgICAgVkFSX1RFWFRfRGV2aXNlID0gIuKCrCIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIFZBUl9URVhUX0RldmlzZSA9ICIkIgogICAgICAgICAgICBWQVJfVEVYVF9BbW91bnRJbnRlcnZhbCA9IChBUElfUmV0dXJuX1BMQU5fQW1vdW50SW50ZXJ2YWwvMTAwKQogICAgICAgICAgICBpZihBUElfUmV0dXJuX1BMQU5fVHlwZSA9PSAicmVjdXJyaW5nIik6CiAgICAgICAgICAgICAgICBpZihBUElfUmV0dXJuX1BMQU5fUmVjdXJyaW5nQ291bnQgPT0gMSk6CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGYie1ZBUl9URVhUX0Ftb3VudEludGVydmFsfXtWQVJfVEVYVF9EZXZpc2V9L3tBUElfUmV0dXJuX1BMQU5fUmVjdXJyaW5nSW50ZXJ2YWx9IgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oJ2NscycpCiAgICAgICAgICAgICAgICBvcy5zeXN0ZW0oZid0aXRsZSB7QVBJX1JldHVybl9JTlRFR1JBVElPTl9EaXNjb3JkVXNlcm5hbWV9I3tBUElfUmV0dXJuX0lOVEVHUkFUSU9OX0Rpc2NvcmREaXNjcmltaW5hdG9yfSAtIHtBUElfUmV0dXJuX1BMQU5fbmFtZX0ge21lc3NhZ2V9JykKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgICAgIHByaW50KGYie2NvbG9yLmdyaXN9W3tjb2xvci5qYXVuZX1MSUNFTkNFe2NvbG9yLmdyaXN9XSBTVEFUVVQgLSB7Y29sb3IudmVydH1BY3RpZntjb2xvci5ncmlzfSIpCiAgICAgICAgICAgIHByaW50KGYie2NvbG9yLmdyaXN9W3tjb2xvci5jeWFufUlORk9STUFUSU9Oe2NvbG9yLmdyaXN9XSBDb25uZWN0w6kuIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChmIntjb2xvci5ncmlzfVt7Y29sb3IuamF1bmV9TElDRU5DRXtjb2xvci5ncmlzfV0gU1RBVFVUIC0ge2NvbG9yLnJvdWdlfUV4cGlyw6l7Y29sb3IuZ3Jpc30iKQogICAgZWxzZToKICAgICAgICBpZihsaWNlbmNlKToKICAgICAgICAgICAgcHJpbnQoZiJ7Y29sb3IuZ3Jpc31be2NvbG9yLmphdW5lfUxJQ0VOQ0V7Y29sb3IuZ3Jpc31dIFNUQVRVVCAtIHtjb2xvci5yb3VnZX1JbmNvbm51ZXtjb2xvci5ncmlzfSIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJ7Y29sb3IuZ3Jpc31be2NvbG9yLmN5YW59SU5GT1JNQVRJT057Y29sb3IuZ3Jpc31dIFZvdXMgZGV2ZXoge2NvbG9yLnJvdWdlfW9ibGlnYXRvaXJlbWVudHtjb2xvci5ncmlzfSDDqWNyaXJlIHVuZSBsaWNlbmNlIGRhbnMgbGUgZmljaGllciBgbGljZW5jZS5qc29uYCAhIikKZWxzZToKICAgIGlmKGxpY2VuY2UpOgogICAgICAgIHByaW50KGYie2NvbG9yLmdyaXN9W3tjb2xvci5qYXVuZX1MSUNFTkNFe2NvbG9yLmdyaXN9XSB7Y29sb3Iucm91Z2V9SW5jb25udWV7Y29sb3IuZ3Jpc30iKQogICAgZWxzZToKICAgICAgICBwcmludChmIntjb2xvci5ncmlzfVt7Y29sb3IuY3lhbn1JTkZPUk1BVElPTntjb2xvci5ncmlzfV0gVm91cyBkZXZleiB7Y29sb3Iucm91Z2V9b2JsaWdhdG9pcmVtZW50e2NvbG9yLmdyaXN9IMOpY3JpcmUgdW5lIGxpY2VuY2UgZGFucyBsZSBmaWNoaWVyIGBsaWNlbmNlLmpzb25gICEiKQo="}
