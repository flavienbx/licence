{"main":"ZGVmIGluZm9fbGljZW5jZShsaWNlbmNlSUQpOgogICAgdHJ5OgogICAgICAgIHVybCA9IGYiaHR0cHM6Ly9hcGkuaHlwZXIuY28vdjYvbGljZW5zZXMve2xpY2VuY2VJRH0iCiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgImFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAiQmVhcmVyIHBrXzFFUnFiZlRuUm9wblZmVFVXRXZxbVcxWUtKOERickl6RTZBUVk5MVZzRWxsMW9UdFFrZElWMkRxMDJlT3AyMmMifQogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkKICAgIGV4Y2VwdDoKICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuCgpwcmludChmIntjb2xvci5ncmlzfVt7Y29sb3IuY3lhbn1JTkZPUk1BVElPTntjb2xvci5ncmlzfV0gQ29ubmVjdGlvbiBlbiBjb3Vycy4uLiIpCgoKaWYgKGluZm9fbGljZW5jZShsaWNlbmNlKSk6CiAgICBpbmZvID0gaW5mb19saWNlbmNlKGxpY2VuY2UpCiAgICBpZiAoaW5mb1sncGxhbiddWydhY3RpdmUnXSk6CiAgICAgICAgaWYgKGluZm9bJ3BsYW4nXVsnYWN0aXZlJ10gPT0gVHJ1ZSk6CiAgICAgICAgICAgIEFQSV9SZXR1cm5fSU5URUdSQVRJT05fRGlzY29yZElEID0gaW5mb1snaW50ZWdyYXRpb25zJ11bJ2Rpc2NvcmQnXVsnaWQnXQogICAgICAgICAgICBBUElfUmV0dXJuX0lOVEVHUkFUSU9OX0Rpc2NvcmRVc2VybmFtZSA9IGluZm9bJ2ludGVncmF0aW9ucyddWydkaXNjb3JkJ11bJ3VzZXJuYW1lJ10KICAgICAgICAgICAgQVBJX1JldHVybl9JTlRFR1JBVElPTl9EaXNjb3JkRGlzY3JpbWluYXRvciA9IGluZm9bJ2ludGVncmF0aW9ucyddWydkaXNjb3JkJ11bJ2Rpc2NyaW1pbmF0b3InXQogICAgICAgICAgICBBUElfUmV0dXJuX0lOVEVHUkFUSU9OX0Rpc2NvcmRBdmF0YXIgPSBpbmZvWydpbnRlZ3JhdGlvbnMnXVsnZGlzY29yZCddWydhdmF0YXInXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fU3RhdHV0ID0gaW5mb1sncGxhbiddWydhY3RpdmUnXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fbmFtZSA9IGluZm9bJ3BsYW4nXVsnbmFtZSddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9EZXNjcmlwdGlvbiA9IGluZm9bJ3BsYW4nXVsnZGVzY3JpcHRpb24nXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fSW1hZ2UgPSBpbmZvWydwbGFuJ11bJ2ltYWdlJ10KICAgICAgICAgICAgQVBJX1JldHVybl9QTEFOX0Ftb3VudEludGVydmFsID0gaW5mb1sncGxhbiddWydhbW91bnQnXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fUmVjdXJyaW5nSW50ZXJ2YWwgPSBpbmZvWydwbGFuJ11bJ3JlY3VycmluZyddWydpbnRlcnZhbCddCiAgICAgICAgICAgIEFQSV9SZXR1cm5fUExBTl9SZWN1cnJpbmdDb3VudCA9IGluZm9bJ3BsYW4nXVsncmVjdXJyaW5nJ11bJ2ludGVydmFsX2NvdW50J10KICAgICAgICAgICAgQVBJX1JldHVybl9QTEFOX1R5cGUgPSBpbmZvWydwbGFuJ11bJ3R5cGUnXQogICAgICAgICAgICBBUElfUmV0dXJuX1BMQU5fRGV2aXNlID0gaW5mb1sncGxhbiddWydjdXJyZW5jeSddCiAgICAgICAgICAgIGlmKEFQSV9SZXR1cm5fUExBTl9EZXZpc2U9PSJldXIiKToKICAgICAgICAgICAgICAgIFZBUl9URVhUX0RldmlzZSA9ICLigqwiCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBWQVJfVEVYVF9EZXZpc2UgPSAiJCIKICAgICAgICAgICAgVkFSX1RFWFRfQW1vdW50SW50ZXJ2YWwgPSAoQVBJX1JldHVybl9QTEFOX0Ftb3VudEludGVydmFsLzEwMCkKICAgICAgICAgICAgaWYoQVBJX1JldHVybl9QTEFOX1R5cGUgPT0gInJlY3VycmluZyIpOgogICAgICAgICAgICAgICAgaWYoQVBJX1JldHVybl9QTEFOX1JlY3VycmluZ0NvdW50ID09IDEpOgogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBmIntWQVJfVEVYVF9BbW91bnRJbnRlcnZhbH17VkFSX1RFWFRfRGV2aXNlfS97QVBJX1JldHVybl9QTEFOX1JlY3VycmluZ0ludGVydmFsfSIKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdjbHMnKQogICAgICAgICAgICAgICAgb3Muc3lzdGVtKGYndGl0bGUge0FQSV9SZXR1cm5fSU5URUdSQVRJT05fRGlzY29yZFVzZXJuYW1lfSN7QVBJX1JldHVybl9JTlRFR1JBVElPTl9EaXNjb3JkRGlzY3JpbWluYXRvcn0gLSB7QVBJX1JldHVybl9QTEFOX25hbWV9IHttZXNzYWdlfScpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgICAgICAgICBwcmludChmIntjb2xvci5ncmlzfVt7Y29sb3IuamF1bmV9TElDRU5DRXtjb2xvci5ncmlzfV0gU1RBVFVUIC0ge2NvbG9yLnZlcnR9QWN0aWZ7Y29sb3IuZ3Jpc30iKQogICAgICAgICAgICBwcmludChmIntjb2xvci5ncmlzfVt7Y29sb3IuY3lhbn1JTkZPUk1BVElPTntjb2xvci5ncmlzfV0gQ29ubmVjdMOpLiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJ7Y29sb3IuZ3Jpc31be2NvbG9yLmphdW5lfUxJQ0VOQ0V7Y29sb3IuZ3Jpc31dIFNUQVRVVCAtIHtjb2xvci5yb3VnZX1FeHBpcsOpe2NvbG9yLmdyaXN9IikKICAgIGVsc2U6CiAgICAgICAgaWYobGljZW5jZSk6CiAgICAgICAgICAgIHByaW50KGYie2NvbG9yLmdyaXN9W3tjb2xvci5qYXVuZX1MSUNFTkNFe2NvbG9yLmdyaXN9XSBTVEFUVVQgLSB7Y29sb3Iucm91Z2V9SW5jb25udWV7Y29sb3IuZ3Jpc30iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYie2NvbG9yLmdyaXN9W3tjb2xvci5jeWFufUlORk9STUFUSU9Oe2NvbG9yLmdyaXN9XSBWb3VzIGRldmV6IHtjb2xvci5yb3VnZX1vYmxpZ2F0b2lyZW1lbnR7Y29sb3IuZ3Jpc30gw6ljcmlyZSB1bmUgbGljZW5jZSBkYW5zIGxlIGZpY2hpZXIgYGxpY2VuY2UuanNvbmAgISIpCmVsc2U6CiAgICBpZihsaWNlbmNlKToKICAgICAgICBwcmludChmIntjb2xvci5ncmlzfVt7Y29sb3IuamF1bmV9TElDRU5DRXtjb2xvci5ncmlzfV0ge2NvbG9yLnJvdWdlfUluY29ubnVle2NvbG9yLmdyaXN9IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZiJ7Y29sb3IuZ3Jpc31be2NvbG9yLmN5YW59SU5GT1JNQVRJT057Y29sb3IuZ3Jpc31dIFZvdXMgZGV2ZXoge2NvbG9yLnJvdWdlfW9ibGlnYXRvaXJlbWVudHtjb2xvci5ncmlzfSDDqWNyaXJlIHVuZSBsaWNlbmNlIGRhbnMgbGUgZmljaGllciBgbGljZW5jZS5qc29uYCAhIikK"}
